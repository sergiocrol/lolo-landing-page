{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/scordero/Projects/lolo-landing-page/components/Forms/WorkerSignupForm/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useIntl } from 'react-intl';\nimport Form from '../Form';\nimport FormInput from '../FormInput';\nimport Spinner from '../../Spinner';\nimport { workerSignUp } from '../../../services';\nimport { formInput } from '../../../styles/components.module.css';\nimport { dot, selectedDot } from '../../../styles/index.module.css';\nimport { dotSignup } from '../../../styles/signup.module.css';\nvar initialWorkerData = {\n  name: '',\n  email: '',\n  contactNumber: '',\n  addressStreet: '',\n  addressNumber: '',\n  city: '',\n  postCode: '',\n  rate: ''\n};\nvar workerOptionalFields = ['addressFloor', 'addressDoor'];\n\nvar WorkerSignupForm = function WorkerSignupForm(_ref) {\n  _s();\n\n  var showMessage = _ref.showMessage,\n      showConfirmationPage = _ref.showConfirmationPage;\n\n  var _useIntl = useIntl(),\n      f = _useIntl.formatMessage;\n\n  var _useForm = useForm({\n    mode: 'onChange '\n  }),\n      isValid = _useForm.formState.isValid;\n\n  var _useState = useState(1),\n      currentPage = _useState[0],\n      setCurrentPage = _useState[1];\n\n  var _useState2 = useState(initialWorkerData),\n      workerData = _useState2[0],\n      setWorkerData = _useState2[1];\n\n  var _useState3 = useState(true),\n      disabled = _useState3[0],\n      setDisabled = _useState3[1];\n\n  var _useState4 = useState(false),\n      back = _useState4[0],\n      setBack = _useState4[1];\n\n  var _useState5 = useState({\n    pageOne: false,\n    pageTwo: false,\n    pageThree: false\n  }),\n      completedPage = _useState5[0],\n      setCompletedPage = _useState5[1];\n\n  var _useState6 = useState([]),\n      postalCodes = _useState6[0],\n      setPostalCodes = _useState6[1];\n\n  var _useState7 = useState(false),\n      loading = _useState7[0],\n      setLoading = _useState7[1];\n\n  var clickChild = null;\n  useEffect(function () {\n    var postCodeList = [];\n\n    for (var code = 8000; code < 9000; code++) {\n      var newPostCode = {\n        label: \"0\".concat(code),\n        value: \"barcelona\"\n      };\n      postCodeList.push(newPostCode);\n    }\n\n    setPostalCodes(postCodeList);\n  }, []);\n\n  var validateCaptcha = function validateCaptcha() {\n    return new Promise(function (res, rej) {\n      grecaptcha.ready(function () {\n        grecaptcha.execute(process.env.NEXT_PUBLIC_RECAPTCHA_KEY, {\n          action: 'submit'\n        }).then(function (token) {\n          return res(token);\n        })[\"catch\"](function (error) {\n          return res(error);\n        });\n      });\n    });\n  };\n\n  var checkOptionalFields = function checkOptionalFields(values) {\n    Object.keys(values).map(function (val) {\n      if (values[val] === '' && workerOptionalFields.includes(val)) {\n        delete values[val];\n      }\n    });\n    return values;\n  };\n\n  var onSignUpClick = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var values, formattedValues, el, token, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              values = clickChild();\n              formattedValues = checkOptionalFields(values);\n              setWorkerData(_objectSpread(_objectSpread({}, workerData), formattedValues));\n\n              if (!(currentPage < 3)) {\n                _context.next = 10;\n                break;\n              }\n\n              el = Object.keys(completedPage)[currentPage - 1];\n              setCompletedPage(_objectSpread(_objectSpread({}, completedPage), {}, _defineProperty({}, el, true)));\n              setCurrentPage(currentPage + 1);\n              setBack(!back);\n              _context.next = 26;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              setLoading(true);\n              _context.next = 14;\n              return validateCaptcha();\n\n            case 14:\n              token = _context.sent;\n              _context.next = 17;\n              return workerSignUp(_objectSpread(_objectSpread({}, workerData), {}, _defineProperty({\n                rate: data.rate,\n                city: 'Barcelona'\n              }, 'g-recaptcha-response', token)));\n\n            case 17:\n              response = _context.sent;\n              setLoading(false);\n              messageLogic(response);\n              _context.next = 26;\n              break;\n\n            case 22:\n              _context.prev = 22;\n              _context.t0 = _context[\"catch\"](10);\n              setLoading(false);\n              messageLogic(_context.t0);\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 22]]);\n    }));\n\n    return function onSignUpClick(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var messageLogic = function messageLogic(mssg) {\n    if (mssg.sucess) {\n      showConfirmationPage();\n    } else {\n      setCurrentPage(1);\n      showMessage(mssg);\n    }\n  };\n\n  var prevPage = function prevPage(e) {\n    e.preventDefault();\n\n    if (currentPage < 4) {\n      setBack(!back);\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  var checkPostCode = function checkPostCode(value) {\n    var filteredElements = postalCodes.filter(function (o) {\n      return Object.keys(o).some(function (k) {\n        return o[k].toLowerCase().includes(value.toLowerCase());\n      });\n    });\n    return filteredElements.length > 0;\n  };\n\n  var populateFields = function populateFields(e) {\n    if (currentPage === 1 && completedPage.pageOne) {\n      e('contactNumber', workerData.contactNumber, {\n        shouldValidate: true\n      });\n      e('email', workerData.email, {\n        shouldValidate: true\n      });\n      e('name', workerData.name, {\n        shouldValidate: true\n      });\n    }\n\n    if (currentPage === 2 && completedPage.pageTwo) {\n      e('addressNumber', workerData.addressNumber, {\n        shouldValidate: true\n      });\n      e('addressStreet', workerData.addressStreet, {\n        shouldValidate: true\n      });\n      e('postCode', workerData.postCode, {\n        shouldValidate: true\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-6 relative\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: onSignUpClick,\n      onDisabled: function onDisabled(isValid) {\n        return setDisabled(isValid);\n      },\n      setClick: function setClick(click) {\n        return clickChild = click;\n      },\n      setVal: function setVal(e) {\n        return populateFields(e);\n      },\n      back: back,\n      children: [currentPage === 1 ? /*#__PURE__*/_jsxDEV(FormInput, {\n        name: \"name\",\n        label: f({\n          id: 'signupFormWorkerName'\n        }),\n        rules: {\n          required: f({\n            id: 'signupFormFieldError'\n          })\n        },\n        hidden: currentPage !== 1,\n        className: \"\".concat(formInput)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 30\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 1 ? /*#__PURE__*/_jsxDEV(FormInput, {\n        type: \"email\",\n        name: \"email\",\n        label: f({\n          id: 'signupFormWorkerEmail'\n        }),\n        rules: {\n          required: f({\n            id: 'signupFormFieldError'\n          }),\n          pattern: {\n            value: /\\S+@\\S+\\.\\S+/,\n            message: f({\n              id: 'signupFormValidEmail'\n            })\n          }\n        },\n        hidden: currentPage !== 1,\n        className: \"\".concat(formInput)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 30\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 1 ? /*#__PURE__*/_jsxDEV(FormInput, {\n        type: \"number\",\n        name: \"contactNumber\",\n        label: f({\n          id: 'signupFormWorkerPhone'\n        }),\n        rules: {\n          required: f({\n            id: 'signupFormFieldError'\n          })\n        },\n        hidden: currentPage !== 1,\n        className: \"\".concat(formInput)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 30\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        name: \"container\",\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FormInput, {\n          name: \"addressStreet\",\n          label: f({\n            id: 'signupFormWorkerAddressStreet'\n          }),\n          rules: {\n            required: f({\n              id: 'signupFormFieldError'\n            })\n          },\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput),\n          style: {\n            width: '77.5%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n          name: \"addressNumber\",\n          label: f({\n            id: 'signupFormWorkerAddressNumber'\n          }),\n          rules: {\n            required: f({\n              id: 'signupFormFieldError'\n            })\n          },\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput),\n          style: {\n            width: '27.5%',\n            marginLeft: '5%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        name: \"container\",\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FormInput, {\n          name: \"addressFloor\",\n          label: f({\n            id: 'signupFormWorkerAddressFloor'\n          }),\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput),\n          style: {\n            width: '47.5%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n          name: \"addressDoor\",\n          label: f({\n            id: 'signupFormWorkerAddressDoor'\n          }),\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput),\n          style: {\n            width: '47.5%',\n            marginLeft: '5%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        name: \"container\",\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FormInput, {\n          type: \"number\",\n          name: \"postCode\",\n          label: f({\n            id: 'signupFormWorkerPostalCode'\n          }),\n          rules: {\n            validate: function validate(value) {\n              return checkPostCode(value) || f({\n                id: 'signupFormValidPostcode'\n              });\n            }\n          },\n          options: postalCodes,\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput),\n          style: {\n            width: '47.5%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n          name: \"city\",\n          label: f({\n            id: 'signupFormWorkerCity'\n          }),\n          placeholder: \"Barcelona\",\n          hidden: currentPage !== 2,\n          className: \"\".concat(formInput, \" disabled:cursor-not-allowed\"),\n          style: {\n            width: '47.5%',\n            marginLeft: '5%'\n          },\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white text-13 text-gray opacity-75 py-4 px-6 text-justify mb-6 max-w-27 flex border-t-2 border-orange shadow-md relative z-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-1\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"fill-current h-5 w-5 text-orange mr-3\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: f({\n            id: 'signupFormWorkerRateInfo'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        name: \"container\",\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FormInput, {\n          type: \"number\",\n          name: \"rate\",\n          label: f({\n            id: 'signupFormWorkerRate'\n          }),\n          rules: {\n            required: f({\n              id: 'signupFormFieldError'\n            })\n          },\n          hidden: currentPage !== 3,\n          className: \"\".concat(formInput),\n          style: {\n            width: '75%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-4 w-3/12 font-montserrat text-gray font-bold opacity-70 text-17\",\n          children: f({\n            id: 'signupFormWorkerRateValue'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), currentPage === 3 ? /*#__PURE__*/_jsxDEV(FormInput, {\n        name: \"checkbox\",\n        style: {\n          marginTop: '0rem',\n          marginBottom: '4rem',\n          lineHeight: '1rem'\n        },\n        type: \"checkbox\",\n        label: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-13 font-sans font-thin leading-3\",\n          children: [f({\n            id: 'signupFormWorkerPrivacity'\n          }), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            className: \"text-orange\",\n            children: f({\n              id: 'signupFormWorkerPrivacityLink'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 247\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 150\n        }, _this),\n        rules: {\n          required: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 30\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mr-6 \".concat(currentPage === 3 ? 'mt-10 md:mt-24' : 'mt-10', \" relative\"),\n        children: [currentPage !== 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: prevPage,\n          hidden: false,\n          className: \"absolute left-0 text-gray\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-orange text-17\",\n            children: \"\\xAB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 112\n          }, _this), \" \", f({\n            id: 'signupFormWorkerBack'\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 32\n        }, _this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\".concat(dot, \" \").concat(dotSignup, \" \").concat(currentPage === 1 ? selectedDot : '')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\".concat(dot, \" \").concat(dotSignup, \" \").concat(currentPage === 2 ? selectedDot : '')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\".concat(dot, \" \").concat(dotSignup, \" \").concat(currentPage === 3 ? selectedDot : '')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        name: \"container\",\n        className: \"relative\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-0 z-50 w-full\",\n          children: /*#__PURE__*/_jsxDEV(Spinner, {\n            name: \"spinner\",\n            className: \"left-1/2 transform -translate-x-1/2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 22\n        }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 20\n        }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n          type: \"submit\",\n          name: \"button\",\n          value: currentPage === 3 ? loading ? '' : f({\n            id: 'signupFormWorkerSendButton'\n          }) : f({\n            id: 'signupFormWorkerNextButton'\n          }),\n          hidden: false,\n          className: \"bg-orange text-white cursor-pointer rounded-md h-12 w-full font-montserrat text-20 disabled:opacity-50 disabled:cursor-not-allowed mt-3\",\n          disabled: disabled || loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(WorkerSignupForm, \"InEWSybb5UgTjvA/iU3NxIkVdbY=\", false, function () {\n  return [useIntl, useForm];\n});\n\n_c = WorkerSignupForm;\nexport default WorkerSignupForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"WorkerSignupForm\");","map":{"version":3,"sources":["/home/scordero/Projects/lolo-landing-page/components/Forms/WorkerSignupForm/index.js"],"names":["useState","useEffect","useForm","useIntl","Form","FormInput","Spinner","workerSignUp","formInput","dot","selectedDot","dotSignup","initialWorkerData","name","email","contactNumber","addressStreet","addressNumber","city","postCode","rate","workerOptionalFields","WorkerSignupForm","showMessage","showConfirmationPage","f","formatMessage","mode","isValid","formState","currentPage","setCurrentPage","workerData","setWorkerData","disabled","setDisabled","back","setBack","pageOne","pageTwo","pageThree","completedPage","setCompletedPage","postalCodes","setPostalCodes","loading","setLoading","clickChild","postCodeList","code","newPostCode","label","value","push","validateCaptcha","Promise","res","rej","grecaptcha","ready","execute","process","env","NEXT_PUBLIC_RECAPTCHA_KEY","action","then","token","error","checkOptionalFields","values","Object","keys","map","val","includes","onSignUpClick","data","formattedValues","el","response","messageLogic","mssg","sucess","prevPage","e","preventDefault","checkPostCode","filteredElements","filter","o","some","k","toLowerCase","length","populateFields","shouldValidate","click","id","required","pattern","message","width","marginLeft","validate","marginTop","marginBottom","lineHeight"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useIntl } from 'react-intl';\n\nimport Form from '../Form';\nimport FormInput from '../FormInput';\nimport Spinner from '../../Spinner';\nimport { workerSignUp } from '../../../services';\n\nimport { formInput } from '../../../styles/components.module.css';\nimport { dot, selectedDot } from '../../../styles/index.module.css';\nimport { dotSignup } from '../../../styles/signup.module.css';\n\nconst initialWorkerData = {\n  name: '',\n  email: '',\n  contactNumber: '',\n  addressStreet: '',\n  addressNumber: '',\n  city: '',\n  postCode: '',\n  rate: '',\n};\n\nconst workerOptionalFields = [ 'addressFloor', 'addressDoor' ];\n\nconst WorkerSignupForm = ({ showMessage, showConfirmationPage }) => {\n  const { formatMessage: f } = useIntl();\n  const { formState: {isValid} } = useForm({ mode: 'onChange '});\n  const [currentPage, setCurrentPage] = useState(1);\n  const [workerData, setWorkerData] = useState(initialWorkerData);\n  const [disabled, setDisabled] = useState(true);\n  const [back, setBack] = useState(false);\n  const [completedPage, setCompletedPage] = useState({pageOne: false, pageTwo: false, pageThree: false});\n  const [postalCodes, setPostalCodes] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  let clickChild = null;\n\n  useEffect(() => {\n    let postCodeList = [];\n    for(let code = 8000; code < 9000; code++) {\n      const newPostCode = {\n        label: `0${code}`,\n        value: `barcelona`\n      }\n      postCodeList.push(newPostCode);\n    } \n    setPostalCodes(postCodeList);\n  }, []);\n\n  const validateCaptcha = () => {\n    return new Promise((res, rej) => {\n      grecaptcha.ready(() => {\n        grecaptcha.execute(process.env.NEXT_PUBLIC_RECAPTCHA_KEY, { action: 'submit' })\n        .then(token => {\n          return res(token);\n        })\n        .catch(error => {\n          return res(error);\n        })\n      })\n    })\n  }\n\n  const checkOptionalFields = (values) => {\n    Object.keys(values).map(val => {\n      if (values[val] === '' && workerOptionalFields.includes(val)) {\n        delete values[val];\n      }\n    });\n    return values;\n  }\n\n  const onSignUpClick = async (data) => {\n    const values = clickChild();\n    const formattedValues = checkOptionalFields(values);\n    setWorkerData({...workerData, ...formattedValues});\n    if(currentPage < 3) {\n      const el = Object.keys(completedPage)[currentPage - 1];\n      setCompletedPage({...completedPage, [el]: true})\n      setCurrentPage(currentPage+1);\n      setBack(!back);\n    }else{\n      try {\n        setLoading(true);\n        const token = await validateCaptcha();\n        const response = await workerSignUp({ ...workerData, rate: data.rate, city: 'Barcelona', ['g-recaptcha-response']: token });\n        setLoading(false);\n        messageLogic(response);\n      } catch (error) {\n        setLoading(false);\n        messageLogic(error);\n      }\n    }\n  }\n\n  const messageLogic = (mssg) => {\n    if(mssg.sucess) {\n      showConfirmationPage();\n    } else {\n      setCurrentPage(1);\n      showMessage(mssg);\n    }\n  }\n\n  const prevPage = (e) => {\n    e.preventDefault();\n    if (currentPage < 4) {\n      setBack(!back);\n      setCurrentPage(currentPage - 1);\n    }\n  }\n\n  const checkPostCode = (value) => {\n    const filteredElements = postalCodes.filter(o => Object.keys(o).some(k => o[k].toLowerCase().includes(value.toLowerCase())));\n    return filteredElements.length > 0;\n  }\n\n  const populateFields = (e) => {\n    if(currentPage === 1 && completedPage.pageOne) {\n      e('contactNumber', workerData.contactNumber, { shouldValidate: true });\n      e('email', workerData.email, { shouldValidate: true });\n      e('name', workerData.name, { shouldValidate: true });\n    }\n    if(currentPage === 2 && completedPage.pageTwo) {\n      e('addressNumber', workerData.addressNumber, { shouldValidate: true });\n      e('addressStreet', workerData.addressStreet, { shouldValidate: true });\n      e('postCode', workerData.postCode, { shouldValidate: true });\n    }\n  }\n\n  return (\n    <div className=\"mt-6 relative\">\n      <Form onSubmit={onSignUpClick} onDisabled={(isValid) => setDisabled(isValid)} setClick={click => clickChild = click} setVal={(e) => populateFields(e)} back={back}>\n        {currentPage === 1 ? <FormInput name=\"name\" label={f({ id: 'signupFormWorkerName' })} rules={{ required: f({ id: 'signupFormFieldError' }) }} hidden={currentPage !== 1} className={`${formInput}`} /> : <></>}\n        {currentPage === 1 ? <FormInput type=\"email\" name=\"email\" label={f({ id: 'signupFormWorkerEmail' })}rules={{ required: f({ id: 'signupFormFieldError' }), pattern: {value: /\\S+@\\S+\\.\\S+/, message: f({ id: 'signupFormValidEmail' })} }} hidden={currentPage !== 1} className={`${formInput}`} /> : <></>}\n        {currentPage === 1 ? <FormInput type=\"number\" name=\"contactNumber\" label={f({ id: 'signupFormWorkerPhone' })} rules={{ required: f({ id: 'signupFormFieldError' })}} hidden={currentPage !== 1} className={`${formInput}`} /> : <></>}\n        {currentPage === 2 ? \n          <div name=\"container\" className=\"flex items-center\">\n            <FormInput name=\"addressStreet\" label={f({ id: 'signupFormWorkerAddressStreet' })} rules={{ required: f({ id: 'signupFormFieldError' }) }} hidden={currentPage !== 2} className={`${formInput}`} style={{width: '77.5%'}} />\n            <FormInput name=\"addressNumber\" label={f({ id: 'signupFormWorkerAddressNumber' })} rules={{ required: f({ id: 'signupFormFieldError' }) }} hidden={currentPage !== 2} className={`${formInput}`} style={{width: '27.5%', marginLeft: '5%'}} />\n          </div> \n        : <></>}\n        {currentPage === 2 ? \n          <div name=\"container\" className=\"flex items-center\">\n            <FormInput name=\"addressFloor\" label={f({ id: 'signupFormWorkerAddressFloor' })} hidden={currentPage !== 2} className={`${formInput}`} style={{width: '47.5%'}} />\n            <FormInput name=\"addressDoor\" label={f({ id: 'signupFormWorkerAddressDoor' })} hidden={currentPage !== 2} className={`${formInput}`} style={{width: '47.5%', marginLeft: '5%'}} />\n          </div> \n        : <></>}\n        {currentPage === 2 ? \n          <div name=\"container\" className=\"flex items-center\">\n            <FormInput type=\"number\" name=\"postCode\" label={f({ id: 'signupFormWorkerPostalCode' })} rules={{ validate: value => checkPostCode(value) || f({ id: 'signupFormValidPostcode' })}} options={postalCodes} hidden={currentPage !== 2} className={`${formInput}`} style={{width: '47.5%'}} />\n            <FormInput name=\"city\" label={f({ id: 'signupFormWorkerCity' })} placeholder=\"Barcelona\" hidden={currentPage !== 2} className={`${formInput} disabled:cursor-not-allowed`} style={{width: '47.5%', marginLeft: '5%'}} disabled />\n          </div> \n        : <></>}\n        {/* {currentPage === 2 ? <FormInput name=\"addressNumber\" label=\"Número de portal\" rules={{ required: \"Address number is required\" }} hidden={currentPage !== 2} className={`${formInput}`} /> : <></>} */}\n        {/* {currentPage === 2 ? <FormInput type=\"number\" name=\"postCode\" label=\"Código postal\" rules={{ required: \"Postalcode is required\" }} options={postalCodes} hidden={currentPage !== 2} className={`${formInput}`} /> : <></>} */}\n        {currentPage === 3 ? \n          <div className=\"bg-white text-13 text-gray opacity-75 py-4 px-6 text-justify mb-6 max-w-27 flex border-t-2 border-orange shadow-md relative z-50\">\n            <div className=\"py-1\">\n              <svg className=\"fill-current h-5 w-5 text-orange mr-3\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                <path d=\"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z\"/>\n              </svg>\n            </div>\n            <p>{f({ id: 'signupFormWorkerRateInfo' })}</p>\n            {/* <div className={`${arrowTooltip}`}></div> */}\n          </div> \n        : <></> }\n        {currentPage === 3 ? \n          <div name=\"container\" className=\"flex items-center\">\n            <FormInput type=\"number\" name=\"rate\" label={f({ id: 'signupFormWorkerRate' })} rules={{ required: f({ id: 'signupFormFieldError' }) }} hidden={currentPage !== 3} className={`${formInput}`} style={{width: '75%'}} />\n            <div className=\"ml-4 w-3/12 font-montserrat text-gray font-bold opacity-70 text-17\">{f({ id: 'signupFormWorkerRateValue' })}</div>\n          </div>\n        : <></>}\n        {currentPage === 3 ? <FormInput name=\"checkbox\" style={{marginTop: '0rem', marginBottom: '4rem', lineHeight: '1rem'}} type=\"checkbox\" label={<span className=\"text-13 font-sans font-thin leading-3\">{f({ id: 'signupFormWorkerPrivacity' })} <a href=\"/\" className=\"text-orange\">{f({ id: 'signupFormWorkerPrivacityLink' })}</a></span>} rules={{ required: true }}/> : <></>}\n        <div className={`flex justify-center mr-6 ${currentPage === 3 ? 'mt-10 md:mt-24' : 'mt-10' } relative`}>\n          {currentPage !== 1 ? <button onClick={prevPage} hidden={false} className=\"absolute left-0 text-gray\"><span className=\"text-orange text-17\">&#171;</span> {f({ id: 'signupFormWorkerBack' })}</button> : null }\n          <div className={`${dot} ${dotSignup} ${currentPage === 1 ? selectedDot : ''}`} />\n          <div className={`${dot} ${dotSignup} ${currentPage === 2 ? selectedDot : ''}`} />\n          <div className={`${dot} ${dotSignup} ${currentPage === 3 ? selectedDot : ''}`} />\n        </div> \n        <div name=\"container\" className=\"relative\">\n          {loading ? <div className=\"absolute bottom-0 z-50 w-full\">\n            <Spinner name=\"spinner\" className=\"left-1/2 transform -translate-x-1/2\"/>\n          </div> : <div></div>}\n          <FormInput \n            type='submit' \n            name=\"button\" \n            value={currentPage === 3 ? loading ? '': f({ id: 'signupFormWorkerSendButton' }) : f({ id: 'signupFormWorkerNextButton' })} \n            hidden={false} \n            className=\"bg-orange text-white cursor-pointer rounded-md h-12 w-full font-montserrat text-20 disabled:opacity-50 disabled:cursor-not-allowed mt-3\" \n            disabled={disabled || loading}\n          />\n           {/* md:w-17 */}\n        </div>\n      </Form>\n    </div>\n  )\n}\n\nexport default WorkerSignupForm;"]},"metadata":{},"sourceType":"module"}